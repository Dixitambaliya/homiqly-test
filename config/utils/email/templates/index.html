<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Homiqly Booking Receipt</title>
</head>

<body style="margin: 0; padding: 0; font-family: 'Arial', sans-serif; background-color: #f9fafb; color: #111827;">

  <div style="max-width: 700px; margin: 30px auto; background: #fff; border-radius: 14px; box-shadow: 0 8px 24px rgba(0,0,0,0.05); overflow: hidden;">

    <!-- Header -->
    <div style="background: linear-gradient(135deg, #fbeec7, #fff9e3); padding: 40px 30px 30px 30px;">
      <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
        <img src="cid:headerLogo" alt="Homiqly Logo" style="width: 150px; height: auto;" />
        <div style="text-align: right;">
          <p style="margin: 0; font-size: 14px; color: #555;">${moment(booking.bookingDate).format("MMM DD, YYYY")}</p>
        </div>
      </div>

      <h1 style="margin-top: 20px; font-size: 26px; font-weight: bold; color: #000;">
        Thanks for booking with <span style="color:#000;">Homiqly</span>, ${userName}
      </h1>

      <p style="color: #444; font-size: 15px; margin-top: 10px; line-height: 1.6;">
        Weâ€™ve confirmed your appointment! Below are your service details and receipt summary.
      </p>

      <a href=${receiptUrl}
        style="display: inline-block; background: #000; color: #fff; font-weight: 600; text-decoration: none;
               padding: 12px 28px; border-radius: 50px; margin-top: 18px; font-size: 15px;">
        View Full Receipt
      </a>
    </div>

    <!-- Booking Info -->
    <div style="padding: 30px;">
      <h2 style="font-size: 20px; font-weight: 700; margin-bottom: 15px; color:#111827;">Booking Overview</h2>

      <div style="background: #f9fafb; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
          <span>ğŸ’†â€â™€ï¸ <strong>${booking.serviceName}</strong></span>
          <span style="font-weight: bold;">â‚¹${booking.totalAmount || "N/A"}</span>
        </div>
        <p style="margin: 4px 0; font-size: 14px; color: #555;">
          <strong>Category:</strong> ${booking.serviceCategory}
        </p>
        <p style="margin: 4px 0; font-size: 14px; color: #555;">
          <strong>Date:</strong> ${moment(booking.bookingDate).format("MMM DD, YYYY")}
        </p>
        <p style="margin: 4px 0; font-size: 14px; color: #555;">
          <strong>Time:</strong> ${moment(booking.bookingTime, "HH:mm:ss").format("hh:mm A")}
        </p>
        <p style="margin: 4px 0; font-size: 14px; color: #555;">
          <strong>Total Duration:</strong> ${booking.totalTime || 0} mins
        </p>
        <p style="margin: 4px 0; font-size: 14px; color: #555;">
          <strong>Payment Status:</strong> ${booking.payment_status}
        </p>
      </div>

      <!-- Vendor Card -->
      <div style="background: #fff6ed; border-radius: 10px; padding: 20px; margin-bottom: 25px; border: 1px solid #f2d9b0;">
        <h3 style="margin: 0 0 10px; font-size: 16px; color:#111827;">ğŸ‘©â€ğŸ¨ Vendor Details</h3>
        <p style="margin: 4px 0; font-size: 14px;"><strong>${booking.vendorName || "N/A"}</strong></p>
        <p style="margin: 2px 0; font-size: 13px;">ğŸ“§ ${booking.vendorEmail || "N/A"}</p>
        <p style="margin: 2px 0; font-size: 13px;">ğŸ“ ${booking.vendorPhone || "N/A"}</p>
      </div>

      <!-- Items -->
      <div style="margin-bottom: 25px;">
        <h3 style="font-size: 18px; font-weight: 700; color:#111827;">ğŸ’… Selected Packages</h3>
        <div style="border-radius: 10px; border: 1px solid #eee; overflow: hidden;">
          ${itemRows}
        </div>
      </div>

      <!-- Addons -->
      <div style="margin-bottom: 25px;">
        <h3 style="font-size: 18px; font-weight: 700; color:#111827;">âœ¨ Addons</h3>
        <div style="border-radius: 10px; border: 1px solid #eee; overflow: hidden;">
          ${addonRows}
        </div>
      </div>

      <!-- Preferences -->
      <div style="margin-bottom: 25px;">
        <h3 style="font-size: 18px; font-weight: 700; color:#111827;">ğŸ€ Preferences</h3>
        <div style="border-radius: 10px; border: 1px solid #eee; overflow: hidden;">
          ${preferenceRows}
        </div>
      </div>

      <!-- Concerns -->
      ${concerns.length
        ? `<div style="margin-bottom:25px;">
            <h3 style="font-size:18px; font-weight:700; color:#111827;">ğŸ’­ Concerns</h3>
            <div style="border-radius:10px; border:1px solid #eee; overflow:hidden;">
              ${concernRows}
            </div>
           </div>`
        : ""
      }

      <!-- Total -->
      <div style="text-align:right; margin-top:30px;">
        <p style="font-size:18px; font-weight:700; color:#000;">
          Total Amount: â‚¹${booking.totalAmount || "N/A"}
        </p>
      </div>
    </div>

    <!-- Rate Experience -->
    <div style="background-color:#fef8e7; text-align:center; padding:30px;">
      <h3 style="margin:0 0 10px; font-size:18px; color:#111827;">Rate Your Experience</h3>
      <p style="margin:0 0 15px; font-size:14px; color:#555;">Your feedback helps us improve and make beauty better âœ¨</p>
      <div style="font-size:22px; color:#f6b400; letter-spacing:4px;">â˜…â˜…â˜…â˜…â˜…</div>
      <a href="#" style="display:inline-block; background:#000; color:#fff; text-decoration:none; margin-top:15px;
                         padding:10px 20px; border-radius:6px; font-weight:600; font-size:14px;">
        Leave a Review
      </a>
    </div>

    <!-- Footer -->
    <div style="background-color: #000; color: #bbb; text-align: center; padding: 30px 20px;">
      <img src="cid:footerLogo" alt="Homiqly Logo" style="width: 120px; margin-bottom: 20px;" />

      <div style="margin-top: 10px;">
        <a href="https://www.homiqly.com/help" style="color: #4da3ff; font-size: 13px; margin: 0 8px; text-decoration: none;">Help Center</a> |
        <a href="https://www.homiqly.com/termscondition" style="color: #4da3ff; font-size: 13px; margin: 0 8px; text-decoration: none;">Terms</a> |
        <a href="https://www.homiqly.com/privacypolicy" style="color: #4da3ff; font-size: 13px; margin: 0 8px; text-decoration: none;">Privacy</a> |
        <a href="#" style="color: #4da3ff; font-size: 13px; margin: 0 8px; text-decoration: none;">Unsubscribe</a>
      </div>

      <p style="font-size: 12px; color: #999; margin-top: 12px; line-height: 1.6;">
        Â© 2025 Homiqly. All rights reserved.<br />
        Offer and pricing subject to availability. Services provided by Homiqly verified partners.
      </p>
    </div>
  </div>
</body>
</html>
